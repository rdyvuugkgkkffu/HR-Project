<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<title>HRç®¡ç†ç³»ç»Ÿåå°é¡µé¢</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<link rel="icon" href="/favicon.ico">
	<link rel="stylesheet" href="/layui/css/layui.css" media="all" />
	<link rel="stylesheet" href="/css/index.css" media="all" />
</head>
<body class="main_body">
	<div class="layui-layout layui-layout-admin">
		<!-- é¡¶éƒ¨ -->
		<div class="layui-header header">
			<div class="layui-main mag0">
				<a href="javascript:location.reload();"  class="logo" title="ç‚¹å‡»åˆ·æ–°" >HRç®¡ç†ç³»ç»Ÿ</a>
				<!-- æ˜¾ç¤º/éšè—èœå• -->
				<a href="javascript:location.reload();" class="seraph hideMenu icon-caidan"></a>
			    <!-- é¡¶éƒ¨å³ä¾§èœå• -->
			    <ul class="layui-nav top_menu">
					<li class="layui-nav-item lockcms" pc>
						<a href="javascript:;"><i class="seraph icon-lock"></i><cite>é”å±</cite></a>
					</li>
					<li class="layui-nav-item" id="userInfo">
						<a href="javascript:;"><img src="/images/face.jpg" class="layui-nav-img userAvatar" width="35" height="35"><cite class="adminName" th:text="${session.user.name}"></cite></a>
						<dl class="layui-nav-child">
							<dd pc><a href="javascript:;" class="changeSkin"><i class="layui-icon">&#xe61b;</i><cite>æ›´æ¢çš®è‚¤</cite></a></dd>
							<dd><a href="/logout" class="signOut"><i class="seraph icon-tuichu"></i><cite>é€€å‡º</cite></a></dd>
						</dl>
					</li>
				</ul>
			</div>
		</div>
		<!-- å·¦ä¾§å¯¼èˆª -->
		<div class="layui-side layui-bg-black">
			<div class="user-photo">
				<a class="img" title="æˆ‘çš„å¤´åƒ" ><img src="/images/face.jpg" class="userAvatar"></a>
				<p>ä½ å¥½ï¼<span class="userName"  th:text="${session.user.name}"></span>, æ¬¢è¿ç™»å½•</p>
			</div>
			<div class="navBar layui-side-scroll" id="navBar">
				<ul class="layui-nav layui-nav-tree">
					<li class="layui-nav-item layui-this">
						<a href="javascript:;" data-url="/deskManager"><i class="layui-icon" data-icon="îš">îš</i><cite>åå°é¦–é¡µ</cite></a>
					</li>
				</ul>
			</div>
		</div>
		<!-- å³ä¾§å†…å®¹ -->
		<div class="layui-body layui-form">
			<div class="layui-tab mag0" lay-filter="bodyTab" id="top_tabs_box">
				<ul class="layui-tab-title top_tab" id="top_tabs">
					<li class="layui-this" lay-id=""><i class="layui-icon">&#xe68e;</i> <cite>åå°é¦–é¡µ</cite></li>
				</ul>
				<ul class="layui-nav closeBox">
				  <li class="layui-nav-item">
				    <a href="javascript:;"><i class="layui-icon caozuo">&#xe643;</i> é¡µé¢æ“ä½œ</a>
				    <dl class="layui-nav-child">
					  <dd><a href="javascript:;" class="refresh refreshThis"><i class="layui-icon">&#x1002;</i> åˆ·æ–°å½“å‰</a></dd>
				      <dd><a href="javascript:;" class="closePageOther"><i class="seraph icon-prohibit"></i> å…³é—­å…¶ä»–</a></dd>
				      <dd><a href="javascript:;" class="closePageAll"><i class="seraph icon-guanbi"></i> å…³é—­å…¨éƒ¨</a></dd>
				    </dl>
				  </li>
				</ul>
				<div class="layui-tab-content clildFrame">
					<div class="layui-tab-item layui-show">
						<iframe src="/deskManager"></iframe>
					</div>
				</div>
			</div>
		</div>
		<!-- åº•éƒ¨ -->
		<div class="layui-footer footer">
			<p><span>copyright @2024 HRSYS</span>ã€€ã€€<a onclick="layer.msg('ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜')" class="layui-btn layui-btn-danger layui-btn-sm">æèµ ä½œè€…</a></p>
		</div>
	</div>

	<!-- ç§»åŠ¨å¯¼èˆª -->
	<div class="site-tree-mobile"><i class="layui-icon">&#xe602;</i></div>
	<div class="site-mobile-shade"></div>

	<script type="text/javascript" src="/layui/layui.js"></script>
	<script type="text/javascript" src="/js/cache.js"></script>
	<script type="text/javascript">
		var $,tab,dataStr,layer;
		layui.config({
			base : "/js/"
		}).extend({
			"bodyTab" : "bodyTab"
		})
		layui.use(['bodyTab','form','element','layer','jquery'],function(){
			var form = layui.form,
					element = layui.element;
			$ = layui.$;
			layer = parent.layer === undefined ? layui.layer : top.layer;
			tab = layui.bodyTab({
				openTabNum : "50",
				url : "/permission/loadIndexLeftMenuJson"
			});

			function getData(json){
				$.getJSON(tab.tabConfig.url,function(data){
					dataStr = data.data;
					//é‡æ–°æ¸²æŸ“å·¦ä¾§èœå•
					tab.render();
				})
			}

			$(".topLevelMenus li,.mobileTopLevelMenus dd").click(function(){
				if($(this).parents(".mobileTopLevelMenus").length != "0"){
					$(".topLevelMenus li").eq($(this).index()).addClass("layui-this").siblings().removeClass("layui-this");
				}else{
					$(".mobileTopLevelMenus dd").eq($(this).index()).addClass("layui-this").siblings().removeClass("layui-this");
				}
				$(".layui-layout-admin").removeClass("showMenu");
				$("body").addClass("site-mobile");
				getData($(this).data("menu"));
				//æ¸²æŸ“é¡¶éƒ¨çª—å£
				tab.tabMove();
			})

			//éšè—å·¦ä¾§å¯¼èˆª
			$(".hideMenu").click(function(){
				if($(".topLevelMenus li.layui-this a").data("url")){
					layer.msg("æ­¤æ ç›®çŠ¶æ€ä¸‹å·¦ä¾§èœå•ä¸å¯å±•å¼€");  //ä¸»è¦ä¸ºäº†é¿å…å·¦ä¾§æ˜¾ç¤ºçš„å†…å®¹ä¸é¡¶éƒ¨èœå•ä¸åŒ¹é…
					return false;
				}
				$(".layui-layout-admin").toggleClass("showMenu");
				//æ¸²æŸ“é¡¶éƒ¨çª—å£
				tab.tabMove();
			})

			getData("contentManagement");

			// æ·»åŠ æ–°çª—å£
			$("body").on("click",".layui-nav .layui-nav-item a:not('.mobileTopLevelMenus .layui-nav-item a')",function(){
				//å¦‚æœä¸å­˜åœ¨å­çº§
				if($(this).siblings().length == 0){
					addTab($(this));
					$('body').removeClass('site-mobile');  //ç§»åŠ¨ç«¯ç‚¹å‡»èœå•å…³é—­èœå•å±‚
				}
				$(this).parent("li").siblings().removeClass("layui-nav-itemed");
			})

			if(cacheStr == "true") {
				if (window.sessionStorage.getItem("menu") != null) {
					menu = JSON.parse(window.sessionStorage.getItem("menu"));
					curmenu = window.sessionStorage.getItem("curmenu");
					var openTitle = '';
					for (var i = 0; i < menu.length; i++) {
						openTitle = '';
						if (menu[i].icon) {
							if (menu[i].icon.split("-")[0] == 'icon') {
								openTitle += '<i class="seraph ' + menu[i].icon + '"></i>';
							} else {
								openTitle += '<i class="layui-icon">' + menu[i].icon + '</i>';
							}
						}
						openTitle += '<cite>' + menu[i].title + '</cite>';
						openTitle += '<i class="layui-icon layui-unselect layui-tab-close" data-id="' + menu[i].layId + '">&#x1006;</i>';
						element.tabAdd("bodyTab", {
							title: openTitle,
							content: "<iframe src='" + menu[i].href + "' data-id='" + menu[i].layId + "'></frame>",
							id: menu[i].layId
						})
						//å®šä½åˆ°åˆ·æ–°å‰çš„çª—å£
						if (curmenu != "undefined") {
							if (curmenu == '' || curmenu == "null") {  //å®šä½åˆ°åå°é¦–é¡µ
								element.tabChange("bodyTab", '');
							} else if (JSON.parse(curmenu).title == menu[i].title) {  //å®šä½åˆ°åˆ·æ–°å‰çš„é¡µé¢
								element.tabChange("bodyTab", menu[i].layId);
							}
						} else {
							element.tabChange("bodyTab", menu[menu.length - 1].layId);
						}
					}
					//æ¸²æŸ“é¡¶éƒ¨çª—å£
					tab.tabMove();
				}
			}else{
				window.sessionStorage.removeItem("menu");
				window.sessionStorage.removeItem("curmenu");
			}
		})

		//æ‰“å¼€æ–°çª—å£
		function addTab(_this){
			tab.tabAdd(_this);
		}

		//æèµ å¼¹çª—
		function donation(){
			layer.tab({
				area : ['260px', '367px'],
				tab : [{
					title : "å¾®ä¿¡",
					content : "<div style='padding:30px;overflow:hidden;background:#d2d0d0;'><img src='images/wechat.jpg'></div>"
				},{
					title : "æ”¯ä»˜å®",
					content : "<div style='padding:30px;overflow:hidden;background:#d2d0d0;'><img src='images/alipay.jpg'></div>"
				}]
			})
		}

		//å›¾ç‰‡ç®¡ç†å¼¹çª—
		function showImg(){
			$.getJSON('json/images.json', function(json){
				var res = json;
				layer.photos({
					photos: res,
					anim: 5
				});
			});
		}
	</script>

</body>
</html>
